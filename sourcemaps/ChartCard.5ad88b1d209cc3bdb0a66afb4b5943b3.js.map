{"version":3,"file":"js/ChartCard.b4245d3ef05a6a62ec7a.js","mappings":"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","sources":["webpack:///./src/Components/NumberData/NumberData.js","webpack:///./src/Components/NumberDescription/NumberDescription.js","webpack:///./src/Components/ChartCard/ChartCard.js"],"sourcesContent":["import './NumberData.scss';\n\nimport { Tooltip, TooltipPosition } from '@patternfly/react-core/dist/esm/components/Tooltip/Tooltip';\n\nimport React from 'react';\nimport propTypes from 'prop-types';\n\nexport const NumberData = ({ data, dataSize, percentageData, iconTooltipText }) => (\n    <div className=\"ins-c-dashboard__number-data--number-percentage\">\n        <span className={ `ins-c-dashboard__number-data--${dataSize}` }>\n            {data?.toLocaleString()}\n        </span>\n        {percentageData &&\n            <span className=\"ins-c-dashboard__number-percentage\">\n                <span>{percentageData}</span>\n                <Tooltip\n                    key={ `${iconTooltipText}` }\n                    position={ TooltipPosition.top }\n                    content={ <div>{iconTooltipText}</div> }>\n                </Tooltip>\n            </span>\n        }\n    </div>\n);\n\nNumberData.propTypes = {\n    data: propTypes.any,\n    dataSize: propTypes.string,\n    linkDescription: propTypes.string,\n    percentageData: propTypes.string,\n    iconTooltipText: propTypes.node\n};\n\nexport default NumberData;\n","import './NumberDescription.scss';\n\nimport { Flex, FlexItem } from '@patternfly/react-core/dist/esm/layouts/Flex/index';\n\nimport { Button } from '@patternfly/react-core/dist/esm/components/Button/Button';\nimport { NumberData } from '../NumberData/NumberData';\nimport React from 'react';\nimport propTypes from 'prop-types';\n\nexport const NumberDescription = ({ data, dataSize, percentageData, link, description, linkDescription, layout, iconTooltipText, flexDirection }) => (\n    <div className={ `ins-c-dashboard__number-description ${layout ? `pf-m-${layout}` : ''}` }>\n        <Flex direction={ flexDirection }>\n            <FlexItem spacer={ { default: 'spacerXs' } }>\n                <strong>\n                    <NumberData data={ data } dataSize={ dataSize } percentageData={ percentageData } iconTooltipText={ iconTooltipText } />\n                </strong>\n            </FlexItem>\n            {description && <FlexItem spacer={ { default: 'spacerXs' } }>\n                <span>{description}</span>\n            </FlexItem>}\n            { linkDescription && <FlexItem spacer={ { default: 'spacerXs' } }>\n                <Button component='a' isInline variant=\"link\" href={ link } >{linkDescription}</Button>\n            </FlexItem> }\n        </Flex>\n    </div>\n);\n\nNumberDescription.propTypes = {\n    data: propTypes.any,\n    dataSize: propTypes.string,\n    percentageData: propTypes.string,\n    link: propTypes.any,\n    description: propTypes.string,\n    linkDescription: propTypes.string,\n    layout: propTypes.string,\n    critical: propTypes.string,\n    iconTooltipText: propTypes.node,\n    flexDirection: propTypes.object\n};\n\nexport default NumberDescription;\n","import './ChartCard.scss';\n\nimport { Card, CardBody } from '@patternfly/react-core/dist/esm/components/Card';\nimport { Chart, ChartAxis, ChartBar, ChartTooltip } from '@patternfly/react-charts/dist/esm/components/';\nimport { gqlProps, strong } from '../Common';\n\nimport Loading from '../../Components/Loading/Loading';\nimport NumberDescription from '../NumberDescription/NumberDescription';\nimport React from 'react';\nimport messages from '../../Messages';\nimport { useIntl } from 'react-intl';\nimport { Skeleton } from '@patternfly/react-core';\n\nconst ChartCard = ({ sysStats, chartStats }) => {\n    const intl = useIntl();\n    const { data: sysStatsData, loading: sysStatsLoading } = sysStats;\n    const { data: chartStatsData, loading: chartStatsLoading } = chartStats;\n    const maxYAxisValue = (hostScanData) => {\n        let maxHostScanCount = 0;\n        if (hostScanData) {\n            maxHostScanCount = Math.max(...hostScanData.map(item => item.hostScanCount));\n        }\n\n        // min height of our Y axis is 4, because below that the chart uses fractional values, eg 0.5, 1.0, 1.5, etc\n        return maxHostScanCount < 4 ? 4 : maxHostScanCount;\n    };\n\n    const chartTransform = (data) => data.map(item => {\n        const date = new Date(item.day);\n        // eslint-disable-next-line no-unused-vars\n        const [_weekday, month, day] = `${date}`.split(' ');\n        const label = `${item.hostScanCount} systems scanned on ${month} ${day}`;\n\n        return { name: 'Systems scanned', date, x: `${month} ${day}`, y: Number(item.hostScanCount), label };\n    });\n\n    return <Card className='ins-l-chartCard'>\n        <CardBody>\n            <React.Fragment>\n                {sysStatsLoading ? <Skeleton width=\"350px\" /> : <NumberDescription\n                    data={sysStatsData?.hostScans?.totalCount}\n                    dataSize='md'\n                    description={intl.formatMessage(messages.analysisRunAcross,\n                        {\n                            hosts: sysStatsData?.hosts?.totalCount,\n                            matches: sysStatsData?.ruleStats?.matchedCount,\n                            strong: (str) => strong(str)\n                        })}\n                    layout='horizontal'\n                />}\n                {chartStatsLoading ? <Loading /> :\n                    <div className='ins-l-chartContainer'>\n                        <Chart\n                            ariaDesc='Number of recent system scans'\n                            ariaTitle='Number of recent system scans'\n                            domainPadding={{ x: [30, 25] }}\n                            height={250}\n                            width={650}\n                        >\n                            <ChartAxis\n                                dependentAxis\n                                domain={[0, maxYAxisValue(chartStatsData?.timeSeriesStatsList)]}\n                                tickFormat={t=>parseInt(t)}\n                            />\n                            <ChartAxis crossAxis />\n                            <ChartBar\n                                data={chartTransform(chartStatsData.timeSeriesStatsList)}\n                                labelComponent={<ChartTooltip constrainToVisibleArea />}\n                            />\n                        </Chart>\n                    </div>}\n            </React.Fragment>\n\n        </CardBody>\n    </Card>;\n};\n\nChartCard.propTypes = gqlProps;\n\nexport default ChartCard;\n"],"names":["NumberData","data","dataSize","percentageData","iconTooltipText","className","toLocaleString","Tooltip","key","position","TooltipPosition","top","content","propTypes","linkDescription","NumberDescription","link","description","layout","flexDirection","Flex","direction","FlexItem","spacer","default","Button","component","isInline","variant","href","critical","ChartCard","hostScanData","maxHostScanCount","sysStats","chartStats","intl","useIntl","sysStatsData","sysStatsLoading","loading","chartStatsData","chartStatsLoading","Card","CardBody","Skeleton","width","hostScans","totalCount","formatMessage","messages","analysisRunAcross","hosts","matches","ruleStats","matchedCount","strong","str","Loading","Chart","ariaDesc","ariaTitle","domainPadding","x","height","ChartAxis","C","dependentAxis","domain","timeSeriesStatsList","Math","max","map","item","hostScanCount","tickFormat","t","parseInt","crossAxis","ChartBar","date","Date","day","split","month","label","name","y","Number","labelComponent","ChartTooltip","constrainToVisibleArea","gqlProps"],"sourceRoot":""}